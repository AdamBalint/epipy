
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Rolling Proportion Plot</title>
    
    <meta name="author" content="Caitlin Rivers">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Epipy</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Documentation</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/mers.html">MERS-CoV example</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>Rolling Proportion Plot <small>Odds ratio plot</small></h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>11 May 2015</span>
    </div>
    <div class="content">
      
<p>Rolling proportion plots show how the proportion of a binary variable like sex (male, female) has changed over time. This is useful for understanding risk factors and epidemic dynamics over the course of an outbreak. Sparse data is interpolated. You can choose whether to discard or include missing values using the dropna argument.</p>

<pre><code>df = epipy.get_data('mers_line_list')

#Be sure date is in datetime format
df['date'] = df['Approx onset date'].apply(epipy.date_convert)

prop, fig, ax = epipy.rolling_proportion(df, 'date', 'Sex', 'M', fig=fig, ax=ax)
</code></pre>

<p>The plot shows that most MERS patients are men, and that the proportion fo patients who are men has been relatively steady over time.</p>

<p><img src="http://github.com/cmrivers/epipy/blob/master/figs/rollingprop_example.png?raw=true" alt="Rolling proportion plot" /></p>

<p>And the function also returns a timeseries of proportions (prop in the example above).</p>

<pre><code>2012-10-10    0.833333
2012-10-11    0.833333
2012-10-12    0.857143
2012-10-13    0.857143
2012-10-14    0.857143
</code></pre>

<p><a href="http://cmrivers.github.io/epipy/categories.html">Back to documentation</a></p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#plots-ref">
    		plots <span>6</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/mers.html#plot-ref">plot <span>6</span></a></li>
    
  



    </ul>
    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/plots/2015/05/11/odds-ratio-plot" title="Odds Ratio Plot">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/plots/2015/05/11/steppe-plot" title="Steppe Plot">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2015 Caitlin Rivers
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

