
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Case Trees</title>
	<meta name="author" content="Caitlin Rivers">
	<link href='/assets/themes/the-program/css/style.css' rel="stylesheet" media="all">
	<link href="http://feeds.feedburner.com/" rel="alternate" title="Case Trees" type="application/atom+xml">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script>
</head>
<body>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<nav class="nav-global">
					<ul>
						<li class="logo"><a href="/">Epipy</a></li>
						<li class="archive"><a href="/archive.html">archive</a></li>
						<li class="page"><a href="/pages.html">pages</a></li>
						<li class="category"><a href="/categories.html">categories</a></li>
						<li class="tag"><a href="/tags.html">tags</a></li>
						<li class="forkme"><div><iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=plusjade&repo=jekyll-bootstrap&type=fork&count=true"
									allowtransparency="true" frameborder="0" scrolling="0" width="95px" height="20px"></iframe></div></li>
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">Case Trees</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					
<p><a href="http://cmrivers.github.io/epipy/plots/2014/02/01/case-tree-plot/">Case tree plots</a> allow unusual insight into the dynamics of an outbreak. Epipy currently has two functions to analyze the emerging zoonoses that case tree plots were developed to represent.</p>

<h2 id="basic-reproduction-number">Basic reproduction number</h2>

<p><strong>What is the basic reproduction number?</strong></p>

<p>The <a href="http://en.wikipedia.org/wiki/Basic_reproduction_number">basic reproduction number</a>,
also called R0, is the average number of secondary cases each case produces
in a fully susceptible population. In order for an outbreak to sustain itself,
R0 must be greater than 1. The higher the R0, the more infectious the disease.</p>

<p>For most outbreaks, R0 must be estimated. Case tree plots have the advantage
of showing the exact number of secondary cases per source case.</p>

<p><strong>Example</strong></p>

<p>For this example, weâ€™ll use data from the MERS-CoV packaged with epipy.
You may need to change the path below. To start, first build out the graph.
Then simply call reproduction_number(), which will return a series object,
and a histogram of the R0s. The function has an option to exclude index cases
(index_cases=False), which is useful if you want to calculate the human
to human reproduction number without considering zoonotically acquired cases.</p>

<pre><code>import epipy as epi
import pandas as pd

mers_df = epi.get_data('mers_line_list.csv')
mers_G = epi.build_graph(mers_df, cluster_id='Cluster ID', case_id='Case #',
	        date_col='dates', color='Health status', gen_mean=5, gen_sd=4)

R, fig, ax = epi.reproduction_number(mers_G, index_cases=True, plot=True)
</code></pre>

<p>The series object, R in the above example, can be manipulated further.</p>

<pre><code>print R.describe()
</code></pre>

<p>The R variable returns:</p>

<pre><code>count    101.000000
mean       1.000000
std        1.296148
min        0.000000
25%        0.000000
50%        0.000000
75%        2.000000
max        5.000000
dtype: float64
</code></pre>

<p>And the figure returns:</p>

<p><img src="https://github.com/cmrivers/epipy/blob/master/figs/r0_hist.png?raw=true" alt="Histogram of reproduction numbers" /></p>

<h2 id="generation-analyses">Generation analyses</h2>

<p>Epidemiologists may also be interested in how the disease changes from
one generation to the next. Are cases acquired from animals more severe
than human acquired cases? Does severity decrease as the disease passes
from person to person? Are index cases more likely to be men?
The generation_analysis() function returns a table of case attributes by
generation, as well as an optional bar graph.</p>

<p><strong>Example</strong></p>

<pre><code>fig, ax, table = epi.generation_analysis(mers_G, attribute='Health status', \
                                         plot=True)
</code></pre>

<p>The table variable returns:</p>

<pre><code>Health status  Alive  Asymptomatic  Critical  Dead  Mild  Recovered  All
generation
0                  5             1         3    12     1          0   22
1                  6             7         3    10     8          0   35
2                  2             5         2     7     2          2   20
3                  0             5         4     5     0          2   16
4                  1             0         0     2     0          0    3
5                  0             0         0     1     0          0    1
6                  1             0         0     1     0          0    2
7                  1             0         0     0     0          0    1
8                  0             0         0     0     0          1    1
All               16            18        12    38    11          5  101
</code></pre>

<p>And the figure returns:</p>

<p><img src="https://github.com/cmrivers/epipy/blob/master/figs/mers_generation_hist.png?raw=true" alt="Health status by generation" /></p>

<p>Next: <a href="http://cmrivers.github.io/epipy/analyses/2014/02/02/basic-epidemiology/">Basic epidemiology analyses</a></p>

					<div class="meta">
						<p class="date-publish">
							Published: 
							<date class="date-pub" title="2014-02-02T00:00:00-05:00" datetime="2014-02-02T00:00:00-05:00" pubdate>
							<span class="month"><abbr>February</abbr></span>
							<span class="day">02</span>
							<span class="year">2014</span>
							</date>
						</p>
						<ul class="list-category list-linear">
							<li class="list-head">category: </li>
							
							


  
     
    	<li><a href="/categories.html#analyses-ref">
    		analyses <span>2</span>
    	</a></li>
    
  


						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">tags: </li>
							
							


  
     
    	<li><a href="/mers.html#analyses-ref">analyses <span>2</span></a></li>
     
    	<li><a href="/mers.html#case tree-ref">case tree <span>2</span></a></li>
    
  



						</ul>
					</div><!-- meta -->
				</div><!-- entry-content -->
				<div class="misc-content">
					<div class="social">
						<ul class="list-linear">
							<li><div class="twitter-tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="cmyeaton" data-lang="en">Tweet</a></div></li>
							<li><div class="twitter-follow"><a href="https://twitter.com/cmyeaton" class="twitter-follow-button" data-show-count="false" data-lang="en"></a></div></li>
						</ul>
					</div>
					<div class="comment">
					
					</div>
				</div><!-- misc-content -->
			</div><!-- bd -->
			<footer class="unit-foot">
				<div class="unit-inner unit-foot-inner">
					<nav class="pagination">
						<ul>
							
							<li class="prev"><a class="internal" rel="prev"  href="/analyses/2014/02/02/basic-epidemiology" title="View Basic Epidemiology">&laquo; Basic Epidemiology</a></li>
							
							
							
						</ul>
					</nav>
					<p class="gotop">
						<a href="#page">Back to Top</a>
					</p>
				</div>
			</footer>

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>


				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
	</div><!-- body -->
	<footer class="the-footer">
		<div class="unit-foot">
			<div class="unit-inner unit-foot-inner">
				<div class="misc vcard">
					<h4>about</h4>
					<ul>
						<li class="contact"><address><span class="author fn n">Caitlin Rivers</span> - <span class="fn email"></span></address></li>
						<li class="github"><a href="http://github.com/cmrivers/" rel="me">github.com/cmrivers</a></li>
						<li class="twitter"><a href="http://twitter.com/cmyeaton/" rel="me">twitter.com/cmyeaton</a></li>
						<li class="rss"><a href="http://feeds.feedburner.com/">Subscribe to RSS Feed</a></li>
					</ul>
				</div><!-- misc -->
				<p class="licence">
					Theme: <a href="http://layouts-the.me">the_minimum</a> based on <a href="http://jekyllbootstrap.com/">Jekyll-bootstrap</a>.<br>
					Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.
				</p>
			</div><!-- unit-foot-inner -->
		</div><!-- unit-foot -->
	</footer>
</div><!-- page -->
<script>
	(function(d, s) {
		var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.src = url; js.id = id;
		fjs.parentNode.insertBefore(js, fjs);
		};
	load('//platform.twitter.com/widgets.js', 'tweetjs');
	// load('https://apis.google.com/js/plusone.js', 'gplus1js'); // Checkout http://j.mp/ApDgMr for usage html for this is <div class="g-plusone" data-size="medium"></div>
	// load('//connect.facebook.net/en_US/all.js#xfbml=1', 'fbjssdk'); // Checkout http://j.mp/wZw2xR for using open graph protorol html for this is <div class="fb-like" data-href="/analyses/2014/02/02/case-trees" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>
	}(document, 'script'));
</script>
<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>
  
  
</body>
</html>

